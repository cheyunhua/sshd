(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0803925e"],{1276:function(t,e,i){"use strict";var n=i("d784"),r=i("44e7"),o=i("825a"),a=i("1d80"),s=i("4840"),l=i("8aa5"),c=i("50c4"),d=i("14c3"),u=i("9263"),f=i("9f7f"),p=f.UNSUPPORTED_Y,h=[].push,m=Math.min,g=4294967295;n("split",2,(function(t,e,i){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,i){var n=String(a(this)),o=void 0===i?g:i>>>0;if(0===o)return[];if(void 0===t)return[n];if(!r(t))return e.call(n,t,o);var s,l,c,d=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,m=new RegExp(t.source,f+"g");while(s=u.call(m,n)){if(l=m.lastIndex,l>p&&(d.push(n.slice(p,s.index)),s.length>1&&s.index<n.length&&h.apply(d,s.slice(1)),c=s[0].length,p=l,d.length>=o))break;m.lastIndex===s.index&&m.lastIndex++}return p===n.length?!c&&m.test("")||d.push(""):d.push(n.slice(p)),d.length>o?d.slice(0,o):d}:"0".split(void 0,0).length?function(t,i){return void 0===t&&0===i?[]:e.call(this,t,i)}:e,[function(e,i){var r=a(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,r,i):n.call(String(r),e,i)},function(t,r){var a=i(n,t,this,r,n!==e);if(a.done)return a.value;var u=o(t),f=String(this),h=s(u,RegExp),v=u.unicode,b=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(p?"g":"y"),k=new h(p?"^(?:"+u.source+")":u,b),w=void 0===r?g:r>>>0;if(0===w)return[];if(0===f.length)return null===d(k,f)?[f]:[];var y=0,x=0,S=[];while(x<f.length){k.lastIndex=p?0:x;var _,R=d(k,p?f.slice(x):f);if(null===R||(_=m(c(k.lastIndex+(p?x:0)),f.length))===y)x=l(f,x,v);else{if(S.push(f.slice(y,x)),S.length===w)return S;for(var $=1;$<=R.length-1;$++)if(S.push(R[$]),S.length===w)return S;x=y=_}}return S.push(f.slice(y)),S}]}),p)},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"1dde":function(t,e,i){var n=i("d039"),r=i("b622"),o=i("2d00"),a=r("species");t.exports=function(t){return o>=51||!n((function(){var e=[],i=e.constructor={};return i[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},4231:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{sytle:"mini-height:100%"}},[i("el-row",{attrs:{slot:"header",type:"flex",justify:"space-between",align:"middle"},slot:"header"},[i("el-col",{attrs:{span:18}},[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},t._l(t.breads,(function(e,n){return i("el-breadcrumb-item",{key:e},[i("el-link",{attrs:{disabled:t.breads.length===n+1,type:"primary"},domProps:{textContent:t._s(e)},on:{click:function(e){return t.doBreadcrumb(n)}}})],1)})),1)],1),i("el-col",{staticStyle:{display:"flex","justify-content":"flex-end","align-items":"center"},attrs:{span:6}},[i("el-input",{staticStyle:{"margin-right":"10px"},attrs:{clearable:"",placeholder:"search file or a directory",size:"mini"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),i("el-button",{attrs:{size:"mini",title:"search a file or a dir",icon:"el-icon-search"},on:{click:t.doSearch}}),i("el-button",{attrs:{type:"success",icon:"el-icon-upload",size:"mini",title:"upload a file"},on:{click:t.doUpload}}),i("el-button",{attrs:{type:"primary",icon:"el-icon-folder-add",size:"mini",title:"make a folder"},on:{click:t.doMakeDir}}),i("el-button",{attrs:{type:"warning",icon:"el-icon-refresh",size:"mini",title:"refresh"},on:{click:t.doRefresh}})],1)],1),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.items,stripe:""}},[i("el-table-column",{attrs:{label:"i",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-link",{attrs:{type:"primary",plain:"",icon:e.row.is_dir?"el-icon-folder-opened":"el-icon-document-checked",disabled:!e.row.is_dir},on:{click:function(i){return t.openDir(e.row)}}})]}}])}),i("el-table-column",{attrs:{prop:"name",label:"名称",width:"180"}}),i("el-table-column",{attrs:{prop:"mod",label:"mode",width:"180"}}),i("el-table-column",{attrs:{prop:"size",label:"大小"}}),i("el-table-column",{attrs:{prop:"time",label:"时间"}}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini",icon:"el-icon-download",type:"success"},on:{click:function(i){return t.doDownload(e.row.path,e.row.is_dir)}}}),i("el-button",{attrs:{size:"mini",icon:"el-icon-delete-solid",type:"danger"},on:{click:function(i){return t.doRm(e.row)}}})]}}])})],1),i("df-upload",{attrs:{dir:t.dir,token:t.token,visible:t.v},on:{afterClose:function(e){t.v=!1,t.doRefresh()}}})],1)},r=[],o=(i("99af"),i("ac1f"),i("5319"),i("a15b"),i("1276"),i("841c"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:t.title,visible:t.visible},on:{"update:visible":function(e){t.visible=e},close:function(e){return t.$emit("afterClose")},open:t.doOpen}},[i("el-upload",{ref:"upload",attrs:{action:t.action,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"file-list":t.fileList,data:t.form,"auto-upload":!1}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("上传到服务器")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)}),a=[],s={props:{visible:Boolean,token:String,dir:String},name:"DfUpload",data:function(){return{action:"/api/sftp/upload",title:"上传文件",fileList:[],form:{}}},methods:{doOpen:function(){this.form.token=this.token,this.form.dir=this.dir},submitUpload:function(){this.$refs.upload.submit(),this.$emit("afterClose")},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)}}},l=s,c=i("2877"),d=Object(c["a"])(l,o,a,!1,null,"7418ea9e",null),u=d.exports,f={name:"WebSftp",components:{DfUpload:u},props:{token:String,msg:String},data:function(){return{v:!1,loading:!1,search:"",dir:"",visible:!1,items:[],breads:[]}},computed:{},beforeUpdate:function(){window.document.title="RemoteDesktop"},mounted:function(){this.dir=this.$route.query.dir,this.apiSftpLs(this.dir)},methods:{doUpload:function(){this.v=!0},doRefresh:function(){this.apiSftpLs(this.dir)},doMakeDir:function(){var t=this;this.$prompt("请输入要创建的目录","创建目录",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(e){var i=e.value;t._apiMkdir(i)})).catch((function(){t.$message({type:"info",message:"取消输入"})}))},_apiMkdir:function(t){var e=this,i=this.dir+"/"+t,n=this.token;this.loading=!0,this.$http.get("/api/sftp/mkdir",{params:{token:n,path:i}}).then((function(){e.loading=!1,e.doRefresh()})).catch((function(t){e.loading=!1,e.$message.error(t)}))},doSearch:function(){this.apiSftpLs(this.dir)},doDownload:function(t,e){var i="/api/sftp/download/".concat(e?"dir":"file","?token=").concat(this.token,"&path=").concat(encodeURIComponent(t)),n=window.open(i,"_blank");n.focus()},doRm:function(t){var e=this,i=this.token,n=t.path,r=t.is_dir?"dir":"file";this.$http.get("/api/sftp/rm",{params:{token:i,path:n,dir_or_file:r}}).then((function(t){e.loading=!1,e.apiSftpLs(e.dir)})).catch((function(t){e.loading=!1,e.$message.error(JSON.stringify(t))}))},openDir:function(t){this.apiSftpLs(t.path)},doBreadcrumb:function(t){for(var e=[],i=0;i<=t;i++)e.push(this.breads[i]);var n=e.join("/").replace("//","/");this.apiSftpLs(n)},_setBreads:function(t){if(this.dir=t,"/"!==t){for(var e=t.split("/"),i=0;i<e.length;i++)""===e[i]&&(e[i]="/");this.breads=e}else this.breads=["/"]},apiSftpLs:function(t){var e=this;this.loading=!0;var i=this.token,n=this.search;this.$http.get("/api/sftp/ls",{params:{token:i,dir:t,search:n}}).then((function(t){var i=t.list,n=t.dir;e.loading=!1,e.items=i,e._setBreads(n)})).catch((function(t){e.loading=!1,e.$message.error(JSON.stringify(t))}))}}},p=f,h=(i("7bef"),Object(c["a"])(p,n,r,!1,null,"491314d0",null));e["default"]=h.exports},"44e7":function(t,e,i){var n=i("861d"),r=i("c6b6"),o=i("b622"),a=o("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==r(t))}},"7bef":function(t,e,i){"use strict";i("9d2e")},8418:function(t,e,i){"use strict";var n=i("c04e"),r=i("9bf2"),o=i("5c6c");t.exports=function(t,e,i){var a=n(e);a in t?r.f(t,a,o(0,i)):t[a]=i}},"841c":function(t,e,i){"use strict";var n=i("d784"),r=i("825a"),o=i("1d80"),a=i("129f"),s=i("14c3");n("search",1,(function(t,e,i){return[function(e){var i=o(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,i):new RegExp(e)[t](String(i))},function(t){var n=i(e,t,this);if(n.done)return n.value;var o=r(t),l=String(this),c=o.lastIndex;a(c,0)||(o.lastIndex=0);var d=s(o,l);return a(o.lastIndex,c)||(o.lastIndex=c),null===d?-1:d.index}]}))},"99af":function(t,e,i){"use strict";var n=i("23e7"),r=i("d039"),o=i("e8b5"),a=i("861d"),s=i("7b0b"),l=i("50c4"),c=i("8418"),d=i("65f0"),u=i("1dde"),f=i("b622"),p=i("2d00"),h=f("isConcatSpreadable"),m=9007199254740991,g="Maximum allowed index exceeded",v=p>=51||!r((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),b=u("concat"),k=function(t){if(!a(t))return!1;var e=t[h];return void 0!==e?!!e:o(t)},w=!v||!b;n({target:"Array",proto:!0,forced:w},{concat:function(t){var e,i,n,r,o,a=s(this),u=d(a,0),f=0;for(e=-1,n=arguments.length;e<n;e++)if(o=-1===e?a:arguments[e],k(o)){if(r=l(o.length),f+r>m)throw TypeError(g);for(i=0;i<r;i++,f++)i in o&&c(u,f,o[i])}else{if(f>=m)throw TypeError(g);c(u,f++,o)}return u.length=f,u}})},"9d2e":function(t,e,i){},a15b:function(t,e,i){"use strict";var n=i("23e7"),r=i("44ad"),o=i("fc6a"),a=i("a640"),s=[].join,l=r!=Object,c=a("join",",");n({target:"Array",proto:!0,forced:l||!c},{join:function(t){return s.call(o(this),void 0===t?",":t)}})},a640:function(t,e,i){"use strict";var n=i("d039");t.exports=function(t,e){var i=[][t];return!!i&&n((function(){i.call(null,e||function(){throw 1},1)}))}}}]);
//# sourceMappingURL=chunk-0803925e.32eb697e.js.map